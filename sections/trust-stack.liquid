{% comment %}
  Trust Stack section
  - Shows customizable benefits text
  - Optionally surfaces policy links for Shipping and Returns
{% endcomment %}

{% liquid
  assign benefits_text = section.settings.benefits_text | strip
  if benefits_text == blank
    assign benefits_text = 'trust_stack.benefits_default' | t
  endif
%}

<section class="trust-stack" aria-label="{{ 'trust_stack.aria_label' | t }}">
  <div class="trust-stack__inner">
    {% if benefits_text != blank %}
      <p class="trust-stack__benefits">
        {{ benefits_text | escape }}
      </p>
    {% endif %}

    {% if section.settings.show_policy_links %}
      <ul class="trust-stack__policies" role="list">
        {% if section.settings.show_shipping_policy and shop.policy_shipping_url %}
          <li>
            <a class="trust-stack__policy-link" href="{{ shop.policy_shipping_url }}" target="_blank" rel="noopener">
              {{ 'trust_stack.shipping' | t }}
            </a>
          </li>
        {% endif %}
        {% if section.settings.show_returns_policy and shop.policy_refund_url %}
          <li>
            <a class="trust-stack__policy-link" href="{{ shop.policy_refund_url }}" target="_blank" rel="noopener">
              {{ 'trust_stack.returns' | t }}
            </a>
          </li>
        {% endif %}
      </ul>
    {% endif %}
  </div>

  <style>
    .trust-stack { margin: 1.25rem 0 1.5rem; }
    .trust-stack__benefits { font-weight: 500; margin: 0; }
    .trust-stack__policies { margin: 0.5rem 0 0; padding: 0; list-style: none; display: flex; flex-wrap: wrap; gap: 1rem; }
    .trust-stack__policy-link { text-decoration: underline; }
  </style>
</section>

{% schema %}
{
  "name": "Trust Stack",
  "settings": [
    {
      "type": "textarea",
      "id": "benefits_text",
      "label": "Benefits text",
      "default": "Lab-tested · Transparent COAs · Fast shipping · Easy returns"
    },
    {
      "type": "checkbox",
      "id": "show_policy_links",
      "label": "Show policy links",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_shipping_policy",
      "label": "Show shipping policy",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_returns_policy",
      "label": "Show returns policy",
      "default": true
    }
  ],
  "presets": [
    { "name": "Trust Stack" }
  ]
}
{% endschema %}
